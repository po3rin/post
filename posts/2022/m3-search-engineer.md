---
title: ただのソフトウェアエンジニアが検索エンジニアになるまで
cover: img/gopher.png
date: 2022/05/28
id: m3-custom-tf-regisotry
description: sample
tags:
    - Terraform
draft: true
---

こちらは[エムスリー Advent Calendar 2022 Advent Calendar 2022](https://qiita.com/advent-calendar/2022/m3)の延長戦31日目の記事です。

エムスリーエンジニアリンググループ AI・機械学習チームでソフトウェアエンジニアをしている中村([po3rin](https://twitter.com/po3rin)) です。検索とGoが好きです。

検索エンジニアってどこで採用できるの？という話を至る所でよく聞きます。僕自身も検索エンジニアと名乗るエンジニアにほとんど出会ったことがありません。やはり、世の中の検索にまだ魅了されていないエンジニアを情報検索の世界に引き込むしかないので、今回は僕が情報検索にハマった経緯を紹介することで一人でも多くのエンジニアを情報検索の世界に引き込めればと思います。

<!-- more -->

[:contents]

## 情報検索との出会い

僕が最初に情報検索に出会ったのは前職の[白ヤギコーポレーション](https://shiroyagi.co.jp/)でした。そこではElasticsearchを主に検索エンジンとして採用していました。

そこで上司から転置インデックスや形態素解析で使うダブル配列や最小コスト法などの説明を受けました。

日々使っている検索の機能がこのような洗礼されたアルゴリズムやデータ構造の集合体で出来ていることに衝撃を受けました。

ざっくり上げるだけでも下記のようなアルゴリズムが検索で利用されています。

* データ構造
 - 転置インデックス
 - ダブル配列
* 圧縮アルゴリズム
 - インデックスの圧縮、復元
* 自然言語処理
 - 形態素解析
 - 言語モデル
* ML
 - 分類(クエリやドキュメント)
 - ベクトル近傍検索
 - リランキング
 - パーソナライズ検索
 - 推薦
* 評価
 - nDCGなどの検索評価指標 
* 分散システム
 - Raftなど

すげぇ！奥が深すぎる！
その当時の何も知らない僕が、その深闇に魅了されるまでに時間はかかりませんでした。エンジニアの知的好奇心を存分に満たしてくれる存在、それが僕にとっての情報検索でした。

##　情報検索の探索

情報検索に興味を持った後に、僕がどのように情報検索を学んでいったかを紹介します。

まず僕が触れたのは自然言語処理でした。上司に紹介された下記の本で初めて自然言語処理に触れました。この本では難しい数式などがほとんどなく、形態素解析や、意味解析、転置インデックスなどを学べるので、ファーストステップとしてはおすすめです。

自然言語処理

上記の本で形態素解析に興味を持った自分は更に下記の本を読みました。

形態素解析

上記の本は形態素解析に最も詳しい日本語の書籍だと思います。最小コスト法だけでなく、点推定や未知語の処理、形態素解析の高速化のための工夫などかなり詳しく書かれています。

ダブル配列に関しては下記の記事が最もわかりやすいと思います。

https://takeda25.hatenablog.jp/entry/20120219/1329634865

ここまでざっくりと検索に必要なことを学ぶのと並行に、実際にElasticsearchを使って検索基盤を開発していました。Elasticsearchに関しては下記の本で広くキャッチアップできたのがよかったです。

Elasticsearch

上記の本では初心者がハマりにくいElasticsearchの分散システムの仕組みや、インデックス管理などがしっかり書かれてておすすめです。

ここまででElasticsearchの内部をざっくりと理解した上で検索基盤を構築できると思います。

ここまでくると検索の評価がしたくなってくる頃合いです。下記の書籍が検索の評価だけを論じているイカした書籍です。こちらは基本的な評価指標から、応用レベルの検索指標まで紹介されており、非常に有用です。

情報検索指標

もっと検索について知りたくなった欲しがりさんは下記の書籍がピッタリです。こちらは実際に検索アルゴリズムを実装するためのガチの情報が万歳です。動的に転置インデックスを更新する方法や、転置インデックスの圧縮方法、言語モデルから導く各種検索手法などはかなり面白いです。

情報検索

そして、これらの情報を引っ提げて実務でバリバリ検索基盤を開発していくために下記の書籍もおすすめです。

検索実践ガイド

こちらはかなり実務に寄り添っており、検索基盤を立ち上げる時に気を付けるポイントや検索インターフェースをどうすれば良いかなどがまとまっており、実務で検索をやるなら必見です。

ここまででElasticsearchを使った検索基盤開発で困ることはかなり少なくなっていると思います。

## 発展

更にMLを使った検索やリランキングも非常に面白い分野です。僕はML専門ではないですが、検索に使えそうな情報はなるべくキャッチアップするようにしています。

Tensorflow RecommendersのドキュメントではMLを使った検索やリランキングの例が乗っています。また、ScaNNを使った近似ベクトル検索なども紹介されているので、MLを使った検索やリランキングをやってみたい方には良いと思います。

https://www.tensorflow.org/recommenders/examples/basic_retrieval

リランキングの各種アルゴリズムに関しては一人アドベントカレンダーにまとまっていて勉強になります。

https://adventar.org/calendars/3357

## 
